{"ast":null,"code":"var _jsxFileName = \"/home/hugorteixeira/AvisoVC/frontend/src/pages/TestFacial.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useApp } from '../contexts/AppContext';\nimport { FaceDetector, drawLandmarks } from '../utils/faceDetection';\nimport FastNav from '../components/FastNav';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function TestFacial() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    baselineFace\n  } = useApp();\n  const [status, setStatus] = useState('init'); // init, ready, testing, analyzing, result, error\n  const [testDuration, setTestDuration] = useState(0);\n  const [detectionResult, setDetectionResult] = useState(null);\n  const [currentStatus, setCurrentStatus] = useState('');\n  const [error, setError] = useState(null);\n  const [streamVersion, setStreamVersion] = useState(0);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const faceDetectorRef = useRef(null);\n  const streamRef = useRef(null);\n  const animationFrameRef = useRef(null);\n  const timerRef = useRef(null);\n  useEffect(() => {\n    initializeTest();\n    return () => {\n      cleanup();\n    };\n  }, []);\n  useEffect(() => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const stream = streamRef.current;\n    if (!video || !stream) {\n      return;\n    }\n    let cancelled = false;\n    const prepareVideo = async () => {\n      if (video.srcObject !== stream) {\n        video.srcObject = stream;\n      }\n      if (video.readyState < HTMLMediaElement.HAVE_METADATA) {\n        await new Promise(resolve => {\n          const handler = () => {\n            video.removeEventListener('loadedmetadata', handler);\n            resolve();\n          };\n          video.addEventListener('loadedmetadata', handler, {\n            once: true\n          });\n        });\n      }\n      if (cancelled) return;\n      try {\n        await video.play();\n      } catch (playError) {\n        console.warn('N√£o foi poss√≠vel iniciar o v√≠deo automaticamente:', playError);\n      }\n      if (cancelled) return;\n      if (canvas && video.videoWidth > 0 && video.videoHeight > 0) {\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n      }\n    };\n    prepareVideo();\n    return () => {\n      cancelled = true;\n    };\n  }, [status, streamVersion]);\n  const initializeTest = async () => {\n    try {\n      console.log('üé¨ Initializing test facial...');\n\n      // Check if baseline exists\n      if (!baselineFace) {\n        console.error('‚ùå No baseline face found');\n        setError('Voc√™ precisa criar um perfil facial primeiro');\n        setStatus('error');\n        return;\n      }\n      console.log('‚úÖ Baseline exists:', baselineFace);\n\n      // Initialize camera\n      console.log('üìπ Requesting camera access...');\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'user',\n          width: {\n            ideal: 720\n          },\n          height: {\n            ideal: 540\n          }\n        },\n        audio: false\n      });\n      console.log('‚úÖ Camera access granted');\n      streamRef.current = stream;\n      setStreamVersion(version => version + 1);\n      if (videoRef.current) {\n        console.log('üé• Setting up video element...');\n\n        // Clear any previous srcObject\n        if (videoRef.current.srcObject) {\n          console.log('‚ö†Ô∏è Clearing previous video source');\n          videoRef.current.srcObject = null;\n        }\n        videoRef.current.srcObject = stream;\n        await new Promise(resolve => {\n          videoRef.current.onloadedmetadata = () => {\n            console.log('‚úÖ Video metadata loaded');\n            resolve();\n          };\n        });\n\n        // Ensure video is ready to play\n        try {\n          await videoRef.current.play();\n          console.log('‚úÖ Video playing');\n        } catch (playError) {\n          console.error('‚ùå Error playing video:', playError);\n          throw new Error('N√£o foi poss√≠vel reproduzir o v√≠deo da c√¢mera.');\n        }\n\n        // Wait for video to have valid dimensions\n        console.log('‚è≥ Waiting for video dimensions...');\n        await new Promise((resolve, reject) => {\n          let attempts = 0;\n          const maxAttempts = 50; // 5 seconds max\n          const checkDimensions = () => {\n            attempts++;\n            if (videoRef.current && videoRef.current.videoWidth > 0 && videoRef.current.videoHeight > 0) {\n              console.log(`‚úÖ Video dimensions: ${videoRef.current.videoWidth}x${videoRef.current.videoHeight}`);\n              resolve();\n            } else if (attempts >= maxAttempts) {\n              console.error(`‚ùå Timeout waiting for video dimensions after ${attempts} attempts`);\n              reject(new Error('Timeout esperando dimens√µes do v√≠deo. Tente recarregar a p√°gina.'));\n            } else {\n              console.log(`‚è≥ Video dimensions not ready yet... (attempt ${attempts}/${maxAttempts})`);\n              setTimeout(checkDimensions, 100);\n            }\n          };\n          checkDimensions();\n        });\n        if (canvasRef.current) {\n          canvasRef.current.width = videoRef.current.videoWidth;\n          canvasRef.current.height = videoRef.current.videoHeight;\n          console.log(`‚úÖ Canvas set to ${canvasRef.current.width}x${canvasRef.current.height}`);\n        }\n      }\n\n      // Initialize face detector\n      console.log('ü§ñ Initializing face detector...');\n      faceDetectorRef.current = new FaceDetector();\n      await faceDetectorRef.current.init();\n      console.log('‚úÖ Face detector initialized');\n\n      // Load baseline\n      console.log('üìä Loading baseline...');\n      faceDetectorRef.current.loadBaseline(baselineFace);\n      console.log('‚úÖ Baseline loaded');\n      setStatus('ready');\n      console.log('‚úÖ Test facial ready!');\n    } catch (err) {\n      console.error('‚ùå Failed to initialize test:', err);\n      setError(err.message || 'N√£o foi poss√≠vel iniciar o teste');\n      setStatus('error');\n    }\n  };\n  const handleStartTest = () => {\n    var _videoRef$current, _videoRef$current2;\n    console.log('handleStartTest called');\n    console.log('faceDetectorRef:', faceDetectorRef.current);\n    console.log('videoRef:', videoRef.current);\n    console.log('video dimensions:', (_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.videoWidth, (_videoRef$current2 = videoRef.current) === null || _videoRef$current2 === void 0 ? void 0 : _videoRef$current2.videoHeight);\n    if (!faceDetectorRef.current || !videoRef.current) {\n      console.error('Sistema n√£o inicializado');\n      setError('Sistema n√£o inicializado');\n      setStatus('error');\n      return;\n    }\n\n    // Validate video is ready\n    if (videoRef.current.videoWidth === 0 || videoRef.current.videoHeight === 0) {\n      console.error('V√≠deo n√£o est√° pronto');\n      setError('V√≠deo ainda n√£o est√° pronto. Aguarde um momento e tente novamente.');\n      setStatus('error');\n      return;\n    }\n    console.log('Starting test...');\n    setStatus('testing');\n    setTestDuration(0);\n    setCurrentStatus('Analisando...');\n\n    // Start timer (10 seconds test)\n    timerRef.current = setInterval(() => {\n      setTestDuration(prev => {\n        const newTime = prev + 0.1;\n        if (newTime >= 10) {\n          finishTest();\n        }\n        return newTime;\n      });\n    }, 100);\n\n    // Start detection loop\n    detectLoop();\n  };\n  const detectLoop = () => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const ctx = canvas === null || canvas === void 0 ? void 0 : canvas.getContext('2d');\n    const detector = faceDetectorRef.current;\n\n    // Stop if required resources are not available\n    if (!video || !canvas || !ctx || !detector) {\n      console.warn('Detection loop stopped: missing resources');\n      return;\n    }\n    try {\n      const timestamp = performance.now();\n      const result = detector.detectFrame(video, timestamp);\n\n      // Clear and draw\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n      if (result.faceDetected) {\n        // Draw landmarks\n        if (result.landmarks) {\n          drawLandmarks(ctx, result.landmarks, canvas.width, canvas.height, result.status === 'alert');\n        }\n\n        // Update status\n        if (result.status === 'alert') {\n          setCurrentStatus('‚ö†Ô∏è ASSIMETRIA DETECTADA!');\n          setDetectionResult(result);\n        } else if (result.status === 'ok') {\n          setCurrentStatus('‚úì Normal');\n        }\n      } else if (result.status === 'no_video') {\n        // Video not ready yet, wait a bit\n        setCurrentStatus('Aguardando v√≠deo...');\n      } else {\n        setCurrentStatus('Posicione seu rosto na c√¢mera');\n      }\n\n      // Continue loop\n      animationFrameRef.current = requestAnimationFrame(detectLoop);\n    } catch (err) {\n      console.error('Detection error:', err);\n      setError(err.message);\n      setStatus('error');\n    }\n  };\n  const finishTest = () => {\n    // Stop timer and animation\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n      animationFrameRef.current = null;\n    }\n    setStatus('analyzing');\n\n    // Brief delay to show analyzing state\n    setTimeout(() => {\n      setStatus('result');\n    }, 1000);\n  };\n  const handleContinue = () => {\n    cleanup();\n    if (detectionResult && detectionResult.status === 'alert') {\n      // Skip to results attention\n      navigate('/results-attention');\n    } else {\n      // Continue to speech test\n      navigate('/test-speech');\n    }\n  };\n  const handleRetry = () => {\n    if (faceDetectorRef.current) {\n      faceDetectorRef.current.reset();\n      if (baselineFace) {\n        faceDetectorRef.current.loadBaseline(baselineFace);\n      }\n    }\n    setStatus('ready');\n    setTestDuration(0);\n    setCurrentStatus('');\n    setDetectionResult(null);\n    setError(null);\n  };\n  const cleanup = () => {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n    }\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n    }\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n    if (videoRef.current) {\n      videoRef.current.pause();\n      videoRef.current.srcObject = null;\n    }\n    if (faceDetectorRef.current) {\n      faceDetectorRef.current.cleanup();\n    }\n  };\n\n  // Render states\n  if (status === 'init') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(FastNav, {\n        currentTest: \"face\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Inicializando teste facial...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 7\n    }, this);\n  }\n  if (status === 'error') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(FastNav, {\n        currentTest: \"face\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"icon danger\",\n        children: \"\\u26A0\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Erro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        onClick: initializeTest,\n        children: \"TENTAR NOVAMENTE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button white mt-2\",\n        onClick: () => navigate('/dashboard'),\n        children: \"VOLTAR AO DASHBOARD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }, this);\n  }\n  if (status === 'result') {\n    var _detectionResult$skew, _detectionResult$base, _detectionResult$delt;\n    const hasAlert = detectionResult && detectionResult.status === 'alert';\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(FastNav, {\n        currentTest: \"face\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `icon ${hasAlert ? 'danger' : 'success'}`,\n        children: hasAlert ? '‚ö†Ô∏è' : '‚úì'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Teste Facial \", hasAlert ? 'COM ALERTA' : 'OK']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `card mt-3 ${hasAlert ? 'alert danger' : 'alert success'}`,\n        children: hasAlert ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Assimetria Facial Detectada\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-2\",\n            children: \"O teste detectou uma assimetria significativa em sua express\\xE3o facial. Isso pode ser um sinal de alerta.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 15\n          }, this), detectionResult && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\xCDndice de assimetria:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 22\n              }, this), \" \", (_detectionResult$skew = detectionResult.skewScore) === null || _detectionResult$skew === void 0 ? void 0 : _detectionResult$skew.toFixed(4)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Baseline:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 22\n              }, this), \" \", (_detectionResult$base = detectionResult.baseline) === null || _detectionResult$base === void 0 ? void 0 : _detectionResult$base.toFixed(4)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Diferen\\xE7a:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 22\n              }, this), \" \", (_detectionResult$delt = detectionResult.delta) === null || _detectionResult$delt === void 0 ? void 0 : _detectionResult$delt.toFixed(4)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Teste Facial Normal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-2\",\n            children: \"Nenhuma assimetria significativa foi detectada em sua express\\xE3o facial.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 9\n      }, this), hasAlert ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card mt-2 bg-info\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u26A0\\uFE0F Recomenda\\xE7\\xE3o:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 17\n            }, this), \" Devido ao resultado do teste, recomendamos que voc\\xEA acione a emerg\\xEAncia imediatamente.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button mt-3\",\n          onClick: () => navigate('/results-attention'),\n          children: \"ACIONAR EMERG\\xCANCIA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button green mt-2\",\n          onClick: handleContinue,\n          children: \"CONTINUAR PARA TESTE DE FALA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button white mt-2\",\n          onClick: handleRetry,\n          children: \"REFAZER TESTE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button green mt-3\",\n          onClick: handleContinue,\n          children: \"CONTINUAR PARA TESTE DE FALA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button white mt-2\",\n          onClick: handleRetry,\n          children: \"REFAZER TESTE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 7\n    }, this);\n  }\n  if (status === 'analyzing') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(FastNav, {\n        currentTest: \"face\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Analisando Resultados...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-muted\",\n        children: \"Processando dados do teste facial\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(FastNav, {\n      currentTest: \"face\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Teste FAST 1/4 - Face (Rosto)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-muted\",\n      children: \"Protocolo de Detec\\xE7\\xE3o de AVC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 7\n    }, this), status === 'ready' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Instru\\xE7\\xF5es\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"text-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Sorria\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 17\n          }, this), \" para a c\\xE2mera\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"Mantenha o sorriso por \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"10 segundos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 40\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"O sistema ir\\xE1 detectar se h\\xE1 assimetria facial\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Mantenha o rosto centralizado\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-muted mt-2\",\n        children: /*#__PURE__*/_jsxDEV(\"em\", {\n          children: \"Um sorriso assim\\xE9trico pode indicar fraqueza muscular facial\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-container mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        autoPlay: true,\n        playsInline: true,\n        muted: true,\n        style: {\n          display: status === 'testing' ? 'none' : 'block'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          display: status === 'testing' ? 'block' : 'none',\n          minHeight: '360px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 9\n      }, this), status === 'init' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '50%',\n            left: '50%',\n            transform: 'translate(-50%, -50%)',\n            background: 'rgba(0,0,0,0.8)',\n            padding: '20px 32px',\n            borderRadius: '12px',\n            color: 'white',\n            fontWeight: '600',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner\",\n            style: {\n              margin: '0 auto 16px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 15\n          }, this), \"Carregando c\\xE2mera...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 11\n      }, this), status === 'ready' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            bottom: '20px',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            background: 'rgba(0,0,0,0.7)',\n            padding: '12px 24px',\n            borderRadius: '8px',\n            color: 'white',\n            fontWeight: '600',\n            textAlign: 'center'\n          },\n          children: \"\\uD83D\\uDCF9 C\\xE2mera ativa - Pronto para iniciar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 11\n      }, this), status === 'testing' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '20px',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            background: 'rgba(0,0,0,0.8)',\n            padding: '16px 32px',\n            borderRadius: '12px',\n            color: 'white',\n            fontWeight: '600',\n            fontSize: '1.2rem',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '2rem',\n              marginBottom: '8px'\n            },\n            children: [testDuration.toFixed(1), \"s\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: currentStatus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 7\n    }, this), status === 'testing' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-fill\",\n          style: {\n            width: `${testDuration / 10 * 100}%`,\n            background: (detectionResult === null || detectionResult === void 0 ? void 0 : detectionResult.status) === 'alert' ? 'var(--primary-red)' : 'var(--primary-green)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-muted mt-2\",\n        children: [\"Mantenha o sorriso por \", (10 - testDuration).toFixed(1), \"s\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 9\n    }, this), status === 'ready' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button purple mt-3\",\n        onClick: handleStartTest,\n        children: \"\\uD83D\\uDE0A INICIAR TESTE FACIAL\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button white mt-2\",\n        onClick: () => navigate('/dashboard'),\n        children: \"CANCELAR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 452,\n    columnNumber: 5\n  }, this);\n}\n_s(TestFacial, \"VMNBZD6RY47Fw3eOdcAf2KoQVqM=\", false, function () {\n  return [useNavigate, useApp];\n});\n_c = TestFacial;\nvar _c;\n$RefreshReg$(_c, \"TestFacial\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","useApp","FaceDetector","drawLandmarks","FastNav","jsxDEV","_jsxDEV","Fragment","_Fragment","TestFacial","_s","navigate","baselineFace","status","setStatus","testDuration","setTestDuration","detectionResult","setDetectionResult","currentStatus","setCurrentStatus","error","setError","streamVersion","setStreamVersion","videoRef","canvasRef","faceDetectorRef","streamRef","animationFrameRef","timerRef","initializeTest","cleanup","video","current","canvas","stream","cancelled","prepareVideo","srcObject","readyState","HTMLMediaElement","HAVE_METADATA","Promise","resolve","handler","removeEventListener","addEventListener","once","play","playError","console","warn","videoWidth","videoHeight","width","height","log","navigator","mediaDevices","getUserMedia","facingMode","ideal","audio","version","onloadedmetadata","Error","reject","attempts","maxAttempts","checkDimensions","setTimeout","init","loadBaseline","err","message","handleStartTest","_videoRef$current","_videoRef$current2","setInterval","prev","newTime","finishTest","detectLoop","ctx","getContext","detector","timestamp","performance","now","result","detectFrame","clearRect","drawImage","faceDetected","landmarks","requestAnimationFrame","clearInterval","cancelAnimationFrame","handleContinue","handleRetry","reset","getTracks","forEach","track","stop","pause","className","children","currentTest","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_detectionResult$skew","_detectionResult$base","_detectionResult$delt","hasAlert","skewScore","toFixed","baseline","delta","ref","autoPlay","playsInline","muted","style","display","minHeight","position","top","left","transform","background","padding","borderRadius","color","fontWeight","textAlign","margin","bottom","fontSize","marginBottom","_c","$RefreshReg$"],"sources":["/home/hugorteixeira/AvisoVC/frontend/src/pages/TestFacial.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useApp } from '../contexts/AppContext';\nimport { FaceDetector, drawLandmarks } from '../utils/faceDetection';\nimport FastNav from '../components/FastNav';\n\nexport default function TestFacial() {\n  const navigate = useNavigate();\n  const { baselineFace } = useApp();\n\n  const [status, setStatus] = useState('init'); // init, ready, testing, analyzing, result, error\n  const [testDuration, setTestDuration] = useState(0);\n  const [detectionResult, setDetectionResult] = useState(null);\n  const [currentStatus, setCurrentStatus] = useState('');\n  const [error, setError] = useState(null);\n  const [streamVersion, setStreamVersion] = useState(0);\n\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const faceDetectorRef = useRef(null);\n  const streamRef = useRef(null);\n  const animationFrameRef = useRef(null);\n  const timerRef = useRef(null);\n\n  useEffect(() => {\n    initializeTest();\n    return () => {\n      cleanup();\n    };\n  }, []);\n\n  useEffect(() => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const stream = streamRef.current;\n\n    if (!video || !stream) {\n      return;\n    }\n\n    let cancelled = false;\n\n    const prepareVideo = async () => {\n      if (video.srcObject !== stream) {\n        video.srcObject = stream;\n      }\n\n      if (video.readyState < HTMLMediaElement.HAVE_METADATA) {\n        await new Promise((resolve) => {\n          const handler = () => {\n            video.removeEventListener('loadedmetadata', handler);\n            resolve();\n          };\n          video.addEventListener('loadedmetadata', handler, { once: true });\n        });\n      }\n\n      if (cancelled) return;\n\n      try {\n        await video.play();\n      } catch (playError) {\n        console.warn('N√£o foi poss√≠vel iniciar o v√≠deo automaticamente:', playError);\n      }\n\n      if (cancelled) return;\n\n      if (canvas && video.videoWidth > 0 && video.videoHeight > 0) {\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n      }\n    };\n\n    prepareVideo();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [status, streamVersion]);\n\n  const initializeTest = async () => {\n    try {\n      console.log('üé¨ Initializing test facial...');\n\n      // Check if baseline exists\n      if (!baselineFace) {\n        console.error('‚ùå No baseline face found');\n        setError('Voc√™ precisa criar um perfil facial primeiro');\n        setStatus('error');\n        return;\n      }\n      console.log('‚úÖ Baseline exists:', baselineFace);\n\n      // Initialize camera\n      console.log('üìπ Requesting camera access...');\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'user',\n          width: { ideal: 720 },\n          height: { ideal: 540 },\n        },\n        audio: false,\n      });\n      console.log('‚úÖ Camera access granted');\n\n      streamRef.current = stream;\n      setStreamVersion((version) => version + 1);\n\n      if (videoRef.current) {\n        console.log('üé• Setting up video element...');\n\n        // Clear any previous srcObject\n        if (videoRef.current.srcObject) {\n          console.log('‚ö†Ô∏è Clearing previous video source');\n          videoRef.current.srcObject = null;\n        }\n\n        videoRef.current.srcObject = stream;\n        await new Promise((resolve) => {\n          videoRef.current.onloadedmetadata = () => {\n            console.log('‚úÖ Video metadata loaded');\n            resolve();\n          };\n        });\n\n        // Ensure video is ready to play\n        try {\n          await videoRef.current.play();\n          console.log('‚úÖ Video playing');\n        } catch (playError) {\n          console.error('‚ùå Error playing video:', playError);\n          throw new Error('N√£o foi poss√≠vel reproduzir o v√≠deo da c√¢mera.');\n        }\n\n        // Wait for video to have valid dimensions\n        console.log('‚è≥ Waiting for video dimensions...');\n        await new Promise((resolve, reject) => {\n          let attempts = 0;\n          const maxAttempts = 50; // 5 seconds max\n          const checkDimensions = () => {\n            attempts++;\n            if (videoRef.current && videoRef.current.videoWidth > 0 && videoRef.current.videoHeight > 0) {\n              console.log(`‚úÖ Video dimensions: ${videoRef.current.videoWidth}x${videoRef.current.videoHeight}`);\n              resolve();\n            } else if (attempts >= maxAttempts) {\n              console.error(`‚ùå Timeout waiting for video dimensions after ${attempts} attempts`);\n              reject(new Error('Timeout esperando dimens√µes do v√≠deo. Tente recarregar a p√°gina.'));\n            } else {\n              console.log(`‚è≥ Video dimensions not ready yet... (attempt ${attempts}/${maxAttempts})`);\n              setTimeout(checkDimensions, 100);\n            }\n          };\n          checkDimensions();\n        });\n\n        if (canvasRef.current) {\n          canvasRef.current.width = videoRef.current.videoWidth;\n          canvasRef.current.height = videoRef.current.videoHeight;\n          console.log(`‚úÖ Canvas set to ${canvasRef.current.width}x${canvasRef.current.height}`);\n        }\n      }\n\n      // Initialize face detector\n      console.log('ü§ñ Initializing face detector...');\n      faceDetectorRef.current = new FaceDetector();\n      await faceDetectorRef.current.init();\n      console.log('‚úÖ Face detector initialized');\n\n      // Load baseline\n      console.log('üìä Loading baseline...');\n      faceDetectorRef.current.loadBaseline(baselineFace);\n      console.log('‚úÖ Baseline loaded');\n\n      setStatus('ready');\n      console.log('‚úÖ Test facial ready!');\n    } catch (err) {\n      console.error('‚ùå Failed to initialize test:', err);\n      setError(err.message || 'N√£o foi poss√≠vel iniciar o teste');\n      setStatus('error');\n    }\n  };\n\n  const handleStartTest = () => {\n    console.log('handleStartTest called');\n    console.log('faceDetectorRef:', faceDetectorRef.current);\n    console.log('videoRef:', videoRef.current);\n    console.log('video dimensions:', videoRef.current?.videoWidth, videoRef.current?.videoHeight);\n\n    if (!faceDetectorRef.current || !videoRef.current) {\n      console.error('Sistema n√£o inicializado');\n      setError('Sistema n√£o inicializado');\n      setStatus('error');\n      return;\n    }\n\n    // Validate video is ready\n    if (videoRef.current.videoWidth === 0 || videoRef.current.videoHeight === 0) {\n      console.error('V√≠deo n√£o est√° pronto');\n      setError('V√≠deo ainda n√£o est√° pronto. Aguarde um momento e tente novamente.');\n      setStatus('error');\n      return;\n    }\n\n    console.log('Starting test...');\n    setStatus('testing');\n    setTestDuration(0);\n    setCurrentStatus('Analisando...');\n\n    // Start timer (10 seconds test)\n    timerRef.current = setInterval(() => {\n      setTestDuration((prev) => {\n        const newTime = prev + 0.1;\n        if (newTime >= 10) {\n          finishTest();\n        }\n        return newTime;\n      });\n    }, 100);\n\n    // Start detection loop\n    detectLoop();\n  };\n\n  const detectLoop = () => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const ctx = canvas?.getContext('2d');\n    const detector = faceDetectorRef.current;\n\n    // Stop if required resources are not available\n    if (!video || !canvas || !ctx || !detector) {\n      console.warn('Detection loop stopped: missing resources');\n      return;\n    }\n\n    try {\n      const timestamp = performance.now();\n      const result = detector.detectFrame(video, timestamp);\n\n      // Clear and draw\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n      if (result.faceDetected) {\n        // Draw landmarks\n        if (result.landmarks) {\n          drawLandmarks(\n            ctx,\n            result.landmarks,\n            canvas.width,\n            canvas.height,\n            result.status === 'alert'\n          );\n        }\n\n        // Update status\n        if (result.status === 'alert') {\n          setCurrentStatus('‚ö†Ô∏è ASSIMETRIA DETECTADA!');\n          setDetectionResult(result);\n        } else if (result.status === 'ok') {\n          setCurrentStatus('‚úì Normal');\n        }\n      } else if (result.status === 'no_video') {\n        // Video not ready yet, wait a bit\n        setCurrentStatus('Aguardando v√≠deo...');\n      } else {\n        setCurrentStatus('Posicione seu rosto na c√¢mera');\n      }\n\n      // Continue loop\n      animationFrameRef.current = requestAnimationFrame(detectLoop);\n    } catch (err) {\n      console.error('Detection error:', err);\n      setError(err.message);\n      setStatus('error');\n    }\n  };\n\n  const finishTest = () => {\n    // Stop timer and animation\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n      animationFrameRef.current = null;\n    }\n\n    setStatus('analyzing');\n\n    // Brief delay to show analyzing state\n    setTimeout(() => {\n      setStatus('result');\n    }, 1000);\n  };\n\n  const handleContinue = () => {\n    cleanup();\n    if (detectionResult && detectionResult.status === 'alert') {\n      // Skip to results attention\n      navigate('/results-attention');\n    } else {\n      // Continue to speech test\n      navigate('/test-speech');\n    }\n  };\n\n  const handleRetry = () => {\n    if (faceDetectorRef.current) {\n      faceDetectorRef.current.reset();\n      if (baselineFace) {\n        faceDetectorRef.current.loadBaseline(baselineFace);\n      }\n    }\n    setStatus('ready');\n    setTestDuration(0);\n    setCurrentStatus('');\n    setDetectionResult(null);\n    setError(null);\n  };\n\n  const cleanup = () => {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n    }\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n    }\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach((track) => track.stop());\n      streamRef.current = null;\n    }\n    if (videoRef.current) {\n      videoRef.current.pause();\n      videoRef.current.srcObject = null;\n    }\n    if (faceDetectorRef.current) {\n      faceDetectorRef.current.cleanup();\n    }\n  };\n\n  // Render states\n  if (status === 'init') {\n    return (\n      <div className=\"container\">\n        <FastNav currentTest=\"face\" />\n        <div className=\"spinner\"></div>\n        <p>Inicializando teste facial...</p>\n      </div>\n    );\n  }\n\n  if (status === 'error') {\n    return (\n      <div className=\"container\">\n        <FastNav currentTest=\"face\" />\n        <div className=\"icon danger\">‚ö†Ô∏è</div>\n        <h1>Erro</h1>\n        <p className=\"text-danger\">{error}</p>\n        <button className=\"button\" onClick={initializeTest}>\n          TENTAR NOVAMENTE\n        </button>\n        <button className=\"button white mt-2\" onClick={() => navigate('/dashboard')}>\n          VOLTAR AO DASHBOARD\n        </button>\n      </div>\n    );\n  }\n\n  if (status === 'result') {\n    const hasAlert = detectionResult && detectionResult.status === 'alert';\n\n    return (\n      <div className=\"container\">\n        <FastNav currentTest=\"face\" />\n        <div className={`icon ${hasAlert ? 'danger' : 'success'}`}>\n          {hasAlert ? '‚ö†Ô∏è' : '‚úì'}\n        </div>\n        <h1>Teste Facial {hasAlert ? 'COM ALERTA' : 'OK'}</h1>\n\n        <div className={`card mt-3 ${hasAlert ? 'alert danger' : 'alert success'}`}>\n          {hasAlert ? (\n            <>\n              <h3>Assimetria Facial Detectada</h3>\n              <p className=\"mt-2\">\n                O teste detectou uma assimetria significativa em sua express√£o facial.\n                Isso pode ser um sinal de alerta.\n              </p>\n              {detectionResult && (\n                <div className=\"mt-2\">\n                  <p><strong>√çndice de assimetria:</strong> {detectionResult.skewScore?.toFixed(4)}</p>\n                  <p><strong>Baseline:</strong> {detectionResult.baseline?.toFixed(4)}</p>\n                  <p><strong>Diferen√ßa:</strong> {detectionResult.delta?.toFixed(4)}</p>\n                </div>\n              )}\n            </>\n          ) : (\n            <>\n              <h3>Teste Facial Normal</h3>\n              <p className=\"mt-2\">\n                Nenhuma assimetria significativa foi detectada em sua express√£o facial.\n              </p>\n            </>\n          )}\n        </div>\n\n        {hasAlert ? (\n          <>\n            <div className=\"card mt-2 bg-info\">\n              <p className=\"mb-0\">\n                <strong>‚ö†Ô∏è Recomenda√ß√£o:</strong> Devido ao resultado do teste,\n                recomendamos que voc√™ acione a emerg√™ncia imediatamente.\n              </p>\n            </div>\n            <button className=\"button mt-3\" onClick={() => navigate('/results-attention')}>\n              ACIONAR EMERG√äNCIA\n            </button>\n            <button className=\"button green mt-2\" onClick={handleContinue}>\n              CONTINUAR PARA TESTE DE FALA\n            </button>\n            <button className=\"button white mt-2\" onClick={handleRetry}>\n              REFAZER TESTE\n            </button>\n          </>\n        ) : (\n          <>\n            <button className=\"button green mt-3\" onClick={handleContinue}>\n              CONTINUAR PARA TESTE DE FALA\n            </button>\n            <button className=\"button white mt-2\" onClick={handleRetry}>\n              REFAZER TESTE\n            </button>\n          </>\n        )}\n      </div>\n    );\n  }\n\n  if (status === 'analyzing') {\n    return (\n      <div className=\"container\">\n        <FastNav currentTest=\"face\" />\n        <div className=\"spinner\"></div>\n        <h1>Analisando Resultados...</h1>\n        <p className=\"text-muted\">Processando dados do teste facial</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container\">\n      <FastNav currentTest=\"face\" />\n      <h1>Teste FAST 1/4 - Face (Rosto)</h1>\n      <p className=\"text-muted\">Protocolo de Detec√ß√£o de AVC</p>\n\n      {status === 'ready' && (\n        <div className=\"card mt-3\">\n          <h3>Instru√ß√µes</h3>\n          <ul className=\"text-left\">\n            <li><strong>Sorria</strong> para a c√¢mera</li>\n            <li>Mantenha o sorriso por <strong>10 segundos</strong></li>\n            <li>O sistema ir√° detectar se h√° assimetria facial</li>\n            <li>Mantenha o rosto centralizado</li>\n          </ul>\n          <p className=\"text-muted mt-2\">\n            <em>Um sorriso assim√©trico pode indicar fraqueza muscular facial</em>\n          </p>\n        </div>\n      )}\n\n      <div className=\"video-container mt-3\">\n        <video\n          ref={videoRef}\n          autoPlay\n          playsInline\n          muted\n          style={{ display: status === 'testing' ? 'none' : 'block' }}\n        />\n        <canvas\n          ref={canvasRef}\n          style={{ display: status === 'testing' ? 'block' : 'none', minHeight: '360px' }}\n        />\n\n        {status === 'init' && (\n          <div className=\"video-overlay\">\n            <div style={{\n              position: 'absolute',\n              top: '50%',\n              left: '50%',\n              transform: 'translate(-50%, -50%)',\n              background: 'rgba(0,0,0,0.8)',\n              padding: '20px 32px',\n              borderRadius: '12px',\n              color: 'white',\n              fontWeight: '600',\n              textAlign: 'center',\n            }}>\n              <div className=\"spinner\" style={{ margin: '0 auto 16px' }}></div>\n              Carregando c√¢mera...\n            </div>\n          </div>\n        )}\n\n        {status === 'ready' && (\n          <div className=\"video-overlay\">\n            <div style={{\n              position: 'absolute',\n              bottom: '20px',\n              left: '50%',\n              transform: 'translateX(-50%)',\n              background: 'rgba(0,0,0,0.7)',\n              padding: '12px 24px',\n              borderRadius: '8px',\n              color: 'white',\n              fontWeight: '600',\n              textAlign: 'center',\n            }}>\n              üìπ C√¢mera ativa - Pronto para iniciar\n            </div>\n          </div>\n        )}\n\n        {status === 'testing' && (\n          <div className=\"video-overlay\">\n            <div style={{\n              position: 'absolute',\n              top: '20px',\n              left: '50%',\n              transform: 'translateX(-50%)',\n              background: 'rgba(0,0,0,0.8)',\n              padding: '16px 32px',\n              borderRadius: '12px',\n              color: 'white',\n              fontWeight: '600',\n              fontSize: '1.2rem',\n              textAlign: 'center',\n            }}>\n              <div style={{ fontSize: '2rem', marginBottom: '8px' }}>\n                {testDuration.toFixed(1)}s\n              </div>\n              <div>{currentStatus}</div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {status === 'testing' && (\n        <div className=\"card mt-3\">\n          <div className=\"progress-bar\">\n            <div\n              className=\"progress-fill\"\n              style={{\n                width: `${(testDuration / 10) * 100}%`,\n                background: detectionResult?.status === 'alert'\n                  ? 'var(--primary-red)'\n                  : 'var(--primary-green)'\n              }}\n            ></div>\n          </div>\n          <p className=\"text-center text-muted mt-2\">\n            Mantenha o sorriso por {(10 - testDuration).toFixed(1)}s\n          </p>\n        </div>\n      )}\n\n      {status === 'ready' && (\n        <>\n          <button className=\"button purple mt-3\" onClick={handleStartTest}>\n            üòä INICIAR TESTE FACIAL\n          </button>\n          <button className=\"button white mt-2\" onClick={() => navigate('/dashboard')}>\n            CANCELAR\n          </button>\n        </>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}